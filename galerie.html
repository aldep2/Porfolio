<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Galerie</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>

  <header>
    <h1>Ma Galerie</h1>
    <nav>
      <a href="./index.html">Accueil</a>
      <a href="./galerie.html">Galerie</a>
      <a href="./admin.html">Admin</a>
    </nav>
  </header>

  <main>
    <section id="galerie">
      <h2 style="text-align:center;">Galerie d'images</h2>
      <div class="gallery" id="gallery"></div>
    </section>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <span class="close" id="close">&times;</span>
    <span class="prev" id="prev">&#10094;</span>
    <img class="lightbox-img" id="lightbox-img" src="" alt="">
    <span class="next" id="next">&#10095;</span>
  </div>

  <footer style="text-align:center; padding:1rem; background:#333; color:white;">
    &copy; 2025 Ma Galerie
  </footer>

  <script>
    // Création et tri des images
    const images = Array.from({length: 21}, (_, i) => ({
      src: `./img/photo${i+1}.jpg`,
      alt: `Image ${i+1}`
    })).sort((a, b) => {
      const numA = parseInt(a.src.match(/photo(\d+)\.jpg/)[1]);
      const numB = parseInt(b.src.match(/photo(\d+)\.jpg/)[1]);
      return numA - numB;
    });

    const gallery = document.getElementById('gallery');
    images.forEach(img => {
      const div = document.createElement('div');
      div.classList.add('gallery-item');
      const image = document.createElement('img');
      image.src = img.src;
      image.alt = img.alt;
      div.appendChild(image);
      gallery.appendChild(div);
    });

    // Lightbox
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const closeBtn = document.getElementById('close');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    let currentIndex = 0;
    let galleryImages = [];

    function openLightbox(index) {
      currentIndex = index;
      const img = galleryImages[currentIndex];
      lightboxImg.src = img.src;
      lightboxImg.alt = img.alt;
      lightbox.style.display = 'flex';
    }

    function closeLightbox() {
      lightbox.style.display = 'none';
    }

    function showPrev() {
      currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
      const img = galleryImages[currentIndex];
      lightboxImg.src = img.src;
      lightboxImg.alt = img.alt;
    }

    function showNext() {
      currentIndex = (currentIndex + 1) % galleryImages.length;
      const img = galleryImages[currentIndex];
      lightboxImg.src = img.src;
      lightboxImg.alt = img.alt;
    }

    closeBtn.addEventListener('click', closeLightbox);
    prevBtn.addEventListener('click', showPrev);
    nextBtn.addEventListener('click', showNext);
    lightbox.addEventListener('click', e => {
      if (e.target === lightbox) closeLightbox();
    });

    // Attacher les clics aux images après création
    window.addEventListener('load', () => {
      galleryImages = Array.from(document.querySelectorAll('.gallery-item img'));
      galleryImages.forEach((img, index) => {
        img.addEventListener('click', () => openLightbox(index));
      });
    });
  </script>

</body>
</html>
